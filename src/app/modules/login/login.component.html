<div class="foto-container">
  <img src="../../../assets/image/Foto-fondo.jpg" class="background-image" alt="" />
  <div class="container">
    <div class="row justify-content-center mt-5">
      <div class="col-md-6 text-center mt-5">
        <div class="justify-content-center">
          <img class="logo" src="../../../assets/image/LogoGrande.svg" alt="logo" />
        </div>
        <p-card class="row justify-content-center">
          <form *ngIf="!requireNewPassword" class="p-fluid" (ngSubmit)="signIn()">
            <div *ngIf="errorLogin" class="p-error mt-3">Usuario o contraseña incorrectos.</div>
            <div class="p-field mt-3">
              <input class="input-color" id="username" type="text" pInputText placeholder="Correo corporativo" [(ngModel)]="usuario" name="usuario" />
            </div>
            <div class="p-field mt-3">
              <p-password class="input-color" placeholder="Contraseña" [(ngModel)]="password" name="password" [toggleMask]="true" [feedback]="false"></p-password>
            </div>
            <button pButton type="submit" label="Iniciar Sesión" class="p-button-rounded mt-5"></button>
          </form>

         <!-- New Password Form -->
         <p-card *ngIf="requireNewPassword" class="row justify-content-center">
          <form class="p-fluid" (ngSubmit)="submitNewPassword()" #newPasswordForm="ngForm">
            <div *ngIf="errorLogin" class="p-error mt-3">{{ errorMessage }}</div>
            
            <div class="p-field mt-3">
              <p-password class="input-color" placeholder="Nueva contraseña" [(ngModel)]="newPassword" name="newPassword" required minlength="8" #newPasswordModel="ngModel" [toggleMask]="true" [feedback]="false"></p-password>
              <div *ngIf="newPasswordModel.errors?.['required'] && newPasswordModel.touched" class="p-error mt-1">Nueva contraseña es requerida.</div>
              <div *ngIf="newPasswordModel.errors?.['minlength'] && newPasswordModel.touched" class="p-error mt-1">
                La contraseña debe contener al menos 8 caracteres.
              </div>
            </div>
        
            <div class="p-field mt-3">
              <p-password class="input-color" placeholder="Confirmar Nueva contraseña" [(ngModel)]="confirmPassword" name="confirmPassword" required #confirmPasswordModel="ngModel" [toggleMask]="true" [feedback]="false"></p-password>
              <div *ngIf="confirmPasswordModel.errors?.['required'] && confirmPasswordModel.touched" class="p-error mt-1">confirmar contraseña es requerido.</div>
              <div *ngIf="newPassword !== confirmPassword && confirmPasswordModel.touched" class="p-error mt-1">Las contraseñas no coinciden.</div>
            </div>
        
            <button pButton type="submit" label="Establecer nueva contraseña" class="p-button-rounded mt-5" [disabled]="newPasswordForm.invalid"></button>
          </form>
        </p-card>
        

        </p-card>

        <!-- Link to forgot password -->
        <div class="p-field mt-3" *ngIf="!requireNewPassword">
          <a routerLink="/forgot-password" class="mt-3">Olvidé mi contraseña</a>
        </div>
      </div>
    </div>
  </div>
</div>